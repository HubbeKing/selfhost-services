apiVersion: v1
kind: ConfigMap
metadata:
  name: nextcloud-db-config
data:
  99-nextcloud.cnf: |
    [server]
    pid-file = /run/mysqld/mysqld.pid
    basedir = /usr
    datadir = /var/lib/mysql
    tmpdir = /tmp
    lc-messages-dir = /usr/share/mysql
    lc-messages = en_US
    skip-external-locking = ON

    transaction_isolation = READ-COMMITTED
    innodb_file_per_table = ON
    innodb_buffer_pool_size = 2G
    innodb_flush_log_at_trx_commit = 1
    innodb_log_buffer_size = 64M
    query_cache_type = ON
    query_cache_limit = 8M
    query_cache_min_res_unit = 2048
    query_cache_size = 128M
    tmp_table_size = 128M
    max_heap_table_size = 128M
    slow_query_log = 1
    slow_query_log_file = /var/log/mysql/slow.log
    long_query_time = 1
