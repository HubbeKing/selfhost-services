version: '3.7'

services:
  bazarr:
    image: linuxserver/bazarr:latest
    container_name: bazarr
    env_file:
      - lsio.env
    restart: unless-stopped
    volumes:
      - ./bazarr:/config
      - ${ARRAY}/Videos/Movies:/movies
      - ${ARRAY}/Videos/Shows:/tv
  db:
    image: linuxserver/mariadb:latest
    container_name: db
    env_file:
      - lsio.env
    environment:
      - MYSQL_ROOT_PASSWORD=${MYSQL_ROOT_PASSWORD}
    restart: unless-stopped
    volumes:
      - ./mariadb:/config
  hubbot:
    image: hubbeking/hubbot:latest
    container_name: hubbot
    restart: unless-stopped
    volumes:
      - ./hubbot/data:/app/hubbot/data
      - ./hubbot/logs:/app/hubbot/logs
      - ./hubbot/dbchat.toml:/app/hubbot.toml
  jackett:
    image: linuxserver/jackett:latest
    container_name: jackett
    env_file:
      - lsio.env
    restart: unless-stopped
    volumes:
      - ./jackett/config:/config
      - ./jackett/downloads:/downloads
  jellyfin:
    image: linuxserver/jellyfin:latest
    container_name: jellyfin
    devices:
      - /dev/dri:/dev/dri
    env_file:
      - lsio.env
    restart: unless-stopped
    volumes:
      - ./jellyfin/config:/config
      - ./jellyfin/transcode:/transcode
      - ${ARRAY}/Videos/Shows:/tvshows
      - ${ARRAY}/Videos/Movies:/movies
      - ${ARRAY}/Music:/music
  lidarr:
    image: linuxserver/lidarr:latest
    container_name: lidarr
    env_file:
      - lsio.env
    restart: unless-stopped
    volumes:
      - ./lidarr:/config
      - ${ARRAY}/Music:/music
      - ${ARRAY}/Downloads:/downloads
  nextcloud:
    image: linuxserver/nextcloud:latest
    container_name: nextcloud
    depends_on:
      - db
    env_file:
      - lsio.env
    restart: unless-stopped
    volumes:
      - ./nextcloud/data:/data
      - ./nextcloud/config:/config
      - ${ARRAY}:${ARRAY}
  qbittorrent:
    image: linuxserver/qbittorrent:latest
    container_name: qbittorrent
    env_file:
      - lsio.env
    ports:
      - 62881:62881
      - 62881:62881/udp
    restart: unless-stopped
    volumes:
      - ./qbittorrent:/config
      - ${ARRAY}/Downloads:/downloads
      - ${ARRAY}/Videos:/videos
  radarr:
    image: linuxserver/radarr:latest
    container_name: radarr
    env_file:
      - lsio.env
    restart: unless-stopped
    volumes:
      - ./radarr:/config
      - ${ARRAY}/Videos/Movies:/movies
      - ${ARRAY}/Downloads:/downloads
  rss:
    image: linuxserver/freshrss:latest
    container_name: rss
    depends_on:
      - db
    env_file:
      - lsio.env
    restart: unless-stopped
    volumes:
      - ./freshrss:/config
  sonarr:
    image: linuxserver/sonarr:preview
    container_name: sonarr
    env_file:
      - lsio.env
    restart: unless-stopped
    volumes:
      - ./sonarr:/config
      - ${ARRAY}/Videos/Shows:/tv
      - ${ARRAY}/Downloads:/downloads
  sync:
    image: linuxserver/syncthing:latest
    container_name: sync
    env_file:
      - lsio.env
    ports:
      - "22000:22000"
      - "21027:21027/udp"
    restart: unless-stopped
    volumes:
      - ./sync:/config
      - ${ARRAY}/Sync:/sync

networks:
  default:
    external: true
    name: web
